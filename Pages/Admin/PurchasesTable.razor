<h3>@TableTitle</h3>
<table class="table table-sm table-striped table-bordered">
    <tbody>
        @if (Purchases.Count() > 0)
        {
            foreach (var p in Purchases)
            {
        <tr>
            <td>
                @p.Name
            </td>
            <td>
                @p.City, @p.State
            </td>
            <td>
                Book
            </td>
            <td>
                Quantity
            </td>
            <td>
                Price
            </td>
            <td>
                <button class="btn btn-sm btn-danger" @onclick="@(x => PurchaseSelected.InvokeAsync(p.PurchaseId))">@ButtonLabel </button>
            </td>
        </tr>
                foreach (var i in p.Lines)
                {
                    <tr>
                        <td colspan="2">
                        </td>
                        <td>
                            @i.Book.Title
                        </td>
                        <td>
                            @i.Quantity
                        </td>
                        <td>
                            @i.Price
                        </td>
                        
                    </tr>
                }
            }
        }
    </tbody>
</table>

@code {
    [Parameter]
    public string TableTitle { get; set; } = "Purchases";

    [Parameter]
    public IEnumerable<Purchase> Purchases { get; set; }

    [Parameter]
    public string ButtonLabel { get; set; } = "Shipped";

    [Parameter]
    public EventCallback<int> PurchaseSelected { get; set; }
}
